<!-- {% load staticfiles %}

<link rel="stylesheet" href="../css/_kickstarter_timeline.css">


<div class="timeline_container">
    <canvas id="timeline_canvas" width='1000px' height='800px'>
        Your browser does not support the canvas element.
    </canvas>
    <div class="circles_container">
        <div class="img-circle tl_img tl_img_top">
            <img class="img-circle" id="tl_img_1" src="{% static 'img/kickstarter/timeline/tl_img_1.png' %}" alt="">
        </div>
        <div class="img-circle tl_img tl_img_bottom">
            <img class="img-circle" id="tl_img_2" src="{% static 'img/kickstarter/timeline/tl_img_2.png' %}" alt="">
        </div>
        <div class="img-circle tl_img tl_img_top">
            <img class="img-circle" id="tl_img_3" src="{% static 'img/kickstarter/timeline/tl_img_3.png' %}" alt="">
        </div>
        <div class="img-circle tl_img tl_img_bottom">
            <img class="img-circle" id="tl_img_4" src="{% static 'img/kickstarter/timeline/tl_img_4.png' %}" alt="">
        </div>
        <div class="tl_text" id="tl_text_1">
            <h4 class="timeline-individual-heading">DEC 2012</h4>
            <p class="text-muted">THE KICKOFF</p>
            <p class="text-pain">KA Lite is released as open source<br>
            software and becomes available for<br>
            installation.</p>
            <a href="{% url 'ka_lite' %}" target="_blank">Learn more</a>
        </div>
        <div class="tl_text" id="tl_text_2">
            <h4 class="timeline-individual-heading">APRIL 2013</h4>
            <p class="text-muted">AN ORGANIZATION IS BORN</p>
            <p class="text-pain"><a href="{% url 'home' %}">Learning Equality</a> is established, with a<br>mission to provide wider access to<br>open educational resources and opportunities.</p>
            <a href="{% url 'home' %}" target="_blank">More about us</a>
        </div>
        <div class="tl_text" id="tl_text_3">
            <h4 class="timeline-individual-heading">2013 - 2015</h4>
            <p class="text-muted">KA LITE REACHES 160+ COUNTRIES</p>
            <p class="text-pain">See our <a href="{% url 'map' %}" target="_blank">interactive world map</a> of deployments<br>and installations, and discover impactful<br>stories from people around the world.</p>
            <a href="{% url 'blog' %}" target="_blank">Find stories</a>
        </div>
        <div class="tl_text" id="tl_text_4">
            <h4 class="timeline-individual-heading">OCT 2015</h4>
            <p class="text-muted">CROWDFUNDING CAMPAIGN</p>
            <p class="text-pain">Kolibri will bring even more sources<br>of great online educational content <br>to the offline world.<br></p>
            <a id="be-part" href="#contact"><h4>Be Part Of Our Story!</h4></a>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(function() {
    var timeline_canvas = document.getElementById("timeline_canvas");
    timeline_canvas.height = 800;
    var context = timeline_canvas.getContext('2d');
    var tl_img_1 = $('#tl_img_1');
    var tl_img_2 = $('#tl_img_2');
    var tl_img_3 = $('#tl_img_3');
    var tl_img_4 = $('#tl_img_4');

    var tl_text_1 = $('#tl_text_1');
    var tl_text_2 = $('#tl_text_2');
    var tl_text_3 = $('#tl_text_3');
    var tl_text_4 = $('#tl_text_4');

    $(window).on('resize', function (event) {
        zigzag_line();
    });
    zigzag_line();

    function zigzag_line() {
        timeline_canvas.width  = $(window).width();

        context.beginPath();
        context.moveTo(-6, 0);
        context.lineTo(tl_img_1.offset().left + 70, 500);
        context.lineTo(tl_img_2.offset().left + 70, 300);
        context.lineTo(tl_img_3.offset().left + 70, 500);
        context.lineTo(tl_img_4.offset().left + 70, 300);
        context.strokeStyle = '#8670A1';
        context.lineWidth = 6;
        context.stroke();

        // context.setLineDash([10, 10]);
        // context.lineTo(tl_img_4.offset().left + 70, 300);
        // context.stroke();

        context.font = "bold 68px sans-serif";
        // context.translate(canvas.width / 2, canvas.height / 2);
        context.rotate(angle(-6, 0, tl_img_1.offset().left + 70, 500));
        context.fillStyle = '#8670A1';
        context.fillText("TIMELINE", 100, 0);

        tl_text_1.offset({top: tl_img_1.offset().top + 180, left: tl_img_1.offset().left});
        tl_text_2.offset({top: tl_img_2.offset().top - 190, left: tl_img_2.offset().left});
        tl_text_3.offset({top: tl_img_3.offset().top + 180, left: tl_img_3.offset().left});
        tl_text_4.offset({top: tl_img_4.offset().top - 190, left: tl_img_4.offset().left});
    }

    function angle(cx, cy, ex, ey) {
        var dy = ey - cy;
        var dx = ex - cx;
        var theta = Math.atan2(dy, dx); // range (-PI, PI]
        // theta *= Math.PI; // rads to degs, range (-180, 180]
        //if (theta < 0) theta = 360 + theta; // range [0, 360)
        return theta;
    }
});
</script> -->